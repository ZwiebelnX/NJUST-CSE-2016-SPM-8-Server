<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>用户管理</title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">好好上课</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">课程管理<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">学生管理</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">退出登录</a>
            </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </div>
</nav>
<div class="form-group">
        <div class="col-md-8">
            <div class="fileinput fileinput-new" data-provides="fileinput" id="uploadImageDiv">
                <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
                    <img src="${companyInfo.image}" alt="" />
                </div>
                <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
                <div>
                    <span class="btn default btn-file"> <span
                                        class="fileinput-new">选择图片</span> <span class="fileinput-exists">更改</span> <input type="file" name="uploadImage" id="uploadImage" /></span>
                    <a href="#" class="btn default fileinput-exists" data-dismiss="fileinput">移除</a>
                    <span>请选择1M以内图片</span>
                </div>
            </div>
            <div id="titleImageError" style="color: #a94442"></div>
        </div>
    </div>
</body>
 <script>
   var url = '';
$("#uploadImage").fileupload({
url : ROOT + "/security/company/uploadFile",
dataType : 'json',
autoUpload : false,
acceptFileTypes : /(gif|jpe?g|png)$/i,
maxFileSize : 1000000, // 1 MB
imageMaxWidth : 100,
imageMaxHeight : 100,
messages : {
    acceptFileTypes : '文件类型不匹配',
    maxFileSize : '文件过大',
    minFileSize : '文件过小'
}
}).on("fileuploadadd", function(e, data) {
// 当文件添加上去时候调用
$("#titleImageError").html("");
data.submit()
}).on("fileuploaddone", function(e, data) {
// 上传完成时调用
if (data.result.returnState == "ERROR") {
    alert("上传失败")
    return;
}
url = data.result.returnData.url;
});

function updateMsg() {
$.ajax({
    url : ROOT + "/security/company/updateInfo",
    data : {
        id : $("#companyId").val(),
        image : url,
        companyName : $("#companyName").val(),
        companySite : $("#companySite").val(),
        companyLinker : $("#companyLinker").val(),
        companyTel : $("#companyTel").val()
    },
    type : "post",
    success : function(data) {
        if (data.returnState == "OK") {
            layer.msg('操作成功', {
                icon : 6,
                shade : 0.01,
                offset : [ '57px', '1100px' ]
            });
            $table.bootstrapTable('refresh');
        } else {
            layer.msg('操作失败', {
                icon : 5,
                shade : 0.01,
                offset : [ '90px', '900px' ]
            });
        }
    }
});
}
</script>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>